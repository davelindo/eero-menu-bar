name: EeroControl

options:
  bundleIdPrefix: com.davelindon
  deploymentTarget:
    macOS: "13.0"

settings:
  base:
    SWIFT_VERSION: "5.9"
    GENERATE_INFOPLIST_FILE: NO

targets:
  EeroControl:
    type: application
    platform: macOS
    sources:
      - path: Sources
    resources:
      - path: Resources
        excludes:
          - EeroControl.entitlements
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.davelindon.eerocontrol
        INFOPLIST_FILE: Resources/Info.plist
        CODE_SIGN_ENTITLEMENTS: Resources/EeroControl.entitlements
        ENABLE_HARDENED_RUNTIME: YES
    dependencies: []
    preBuildScripts:
      - name: Ensure App Support Directory
        script: |
          mkdir -p "${HOME}/Library/Application Support/EeroControl"
    scheme:
      testTargets:
        - EeroControlTests

  EeroControlTests:
    type: bundle.unit-test
    platform: macOS
    sources:
      - path: Tests
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.davelindon.eerocontrol.tests
        GENERATE_INFOPLIST_FILE: YES
    dependencies:
      - target: EeroControl
